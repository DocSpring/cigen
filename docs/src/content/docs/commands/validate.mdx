---
title: validate
description: Validate cigen configuration files without generating output
---

The `validate` command checks your cigen configuration for errors without generating any output files.

## Usage

```bash
cigen validate [OPTIONS]
```

## Options

### `--config <PATH>`
Path to the cigen configuration directory or file.

- **Default**: Current directory (`.`)
- **Example**: `--config .cigen/` or `--config .cigen/cigen.yml`

### `--verbose` / `-v`
Enable verbose output showing detailed validation steps.

### `--strict`
Enable strict validation mode with additional checks.

## Examples

### Basic Validation

```bash
cigen validate
```

### Validate Specific Configuration

```bash
cigen validate --config .cigen/
```

### Verbose Output

```bash
cigen validate --config .cigen/ --verbose
```

## What Gets Validated

The validate command performs comprehensive checks:

### 1. Configuration File Syntax
- YAML syntax validation
- JSON schema compliance
- Required field presence

### 2. Job Definitions
- Image specifications
- Step references and syntax
- Dependency graphs (circular dependency detection)
- Required vs optional fields

### 3. Workflow Structure
- Job references exist
- Dependency chains are valid
- No orphaned jobs

### 4. Template Variables
- All referenced variables are defined
- Template syntax is correct
- No undefined template expressions

### 5. Provider-Specific Validation
- CircleCI: Resource class compatibility, orb usage
- Platform-specific constraints and limits

### 6. File References
- Referenced files exist (e.g., Dockerfiles, scripts)
- Source file groups are valid
- Cache key dependencies are resolvable

## Validation Levels

### Basic Validation (Default)
- Schema compliance
- Basic syntax checks
- Job/workflow reference validation

### Strict Validation (`--strict`)
- All basic validations
- Warning-level issues become errors
- Additional best practice checks
- Performance impact analysis

## Error Types and Solutions

### Schema Validation Errors

```
Error: Invalid job configuration at 'jobs.test'
  - Missing required property 'image'
  - Property 'invalid_field' is not allowed
```

**Solution**: Fix the job definition to match the schema requirements.

### Dependency Errors

```
Error: Circular dependency detected
  - job_a -> job_b -> job_c -> job_a
```

**Solution**: Remove circular references in job `requires` fields.

### Template Errors

```
Error: Undefined variable 'app_name' in template
  - File: workflows/main/jobs/deploy.yml
  - Line: 12
```

**Solution**: Define the variable in your `vars` section:

```yaml
vars:
  app_name: my-application
```

### File Reference Errors

```
Error: Referenced file not found
  - File: Dockerfile.production
  - Referenced in: jobs.build_production.dockerfile
```

**Solution**: Create the missing file or correct the reference.

## Exit Codes

- `0`: Validation passed
- `1`: Validation errors found
- `2`: Configuration file not found
- `3`: Internal validation error

## Integration

### Pre-commit Hooks

```yaml
repos:
  - repo: local
    hooks:
      - id: cigen-validate
        name: Validate cigen config
        entry: cigen validate
        language: system
        files: '^\.cigen/'
        pass_filenames: false
```

### CI/CD Pipeline

```yaml
# GitHub Actions
- name: Validate CI config
  run: cigen validate --config .cigen/ --strict

# CircleCI
- run:
    name: Validate CI config
    command: cigen validate --config .cigen/ --strict
```

### Editor Integration

For VS Code, add to `.vscode/settings.json`:

```json
{
  "yaml.schemas": {
    "https://cigen.dev/schemas/v1/config-schema.json": ".cigen/cigen.yml"
  }
}
```

## Performance

Validation is typically fast:
- Small configs (< 10 jobs): < 100ms
- Medium configs (10-50 jobs): < 500ms
- Large configs (50+ jobs): < 2 seconds

Strict mode adds ~50% overhead for additional checks.

## Best Practices

### Regular Validation
Run validation frequently during development:

```bash
# Watch for changes and validate
watch -n 1 cigen validate
```

### Team Workflows
- Add validation to pull request checks
- Include validation in development workflows
- Use `--strict` mode in CI pipelines

### Configuration Organization
Structure your config for easier validation:

```
.cigen/
├── cigen.yml              # Main config
├── jobs/                  # Job definitions
├── workflows/            # Workflow definitions
└── templates/           # Custom templates
```

## Troubleshooting

### Common Issues

1. **YAML Indentation**: Use consistent 2-space indentation
2. **Missing References**: Ensure all referenced jobs/commands exist
3. **Schema Mismatches**: Check field names against documentation
4. **Template Syntax**: Verify Jinja2 template expressions

### Debug Mode

Enable debug output for complex validation issues:

```bash
RUST_LOG=debug cigen validate --verbose
```

## Related Commands

- [`generate`](/commands/generate/) - Generate configuration after validation
- See [configuration overview](/configuration/overview/) for config format details